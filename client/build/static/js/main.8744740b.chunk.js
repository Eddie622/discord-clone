(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,a,t){},104:function(e,a,t){},109:function(e,a,t){},127:function(e,a,t){},128:function(e,a,t){},129:function(e,a,t){},156:function(e,a){},159:function(e,a,t){},160:function(e,a,t){},164:function(e,a,t){},165:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(18),r=t.n(l),s=(t(103),t(3)),o=(t(104),t(47)),i=t.n(o),u=t(75),m=t.n(u),d=t(5),h=t(21),p=Object(h.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,a){e.channelId=a.payload.channelId,e.channelName=a.payload.channelName}}}),f=p.actions.setChannelInfo,E=function(e){return e.app.channelId},g=function(e){return e.app.channelName},b=p.reducer,v=(t(109),t(7)),N=t.n(v),_=Object(h.b)({name:"user",initialState:{user:null},reducers:{login:function(e,a){e.user=a.payload},logout:function(e){e.user=null}}}),j=_.actions,O=j.login,w=(j.logout,function(e){return e.user.user}),C=_.reducer,S=t(36),y=t.n(S),I=function(e){var a=Object(d.b)(),t=Object(d.c)(w),l=Object(n.useState)(e.channelName),r=Object(s.a)(l,2),o=r[0],i=r[1];return c.a.createElement("div",{className:"sidebarChannel",onClick:function(){return a(f({channelId:e.channelId,channelName:e.channelName}))}},t._id===e.creatorID?c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),N.a.put("http://localhost:8000/api/channel/".concat(e.channelId),{name:o}).then((function(e){return console.log(e)}),a(f({channelName:o}))).catch((function(e){return console.log(e)}))}},c.a.createElement("h4",null,c.a.createElement("span",{className:"sidebarChannel_hash"},"#"),c.a.createElement("input",{className:"channel_name",onChange:function(e){return i(e.target.value)},value:o}),c.a.createElement("button",{className:"channel_inputButton",type:"submit"}),c.a.createElement(y.a,{onClick:function(e){e.preventDefault()}}))):c.a.createElement("h4",null,c.a.createElement("span",{className:"sidebarChannel_hash"},"#"),e.channelName))},k=t(76),x=t.n(k),D=t(77),P=t.n(D),F=t(78),H=t.n(F),R=t(179),z=t(79),U=t.n(z),B=t(80),G=t.n(B),L=t(81),T=t.n(L),J=function(){var e=Object(d.c)(w),a=Object(n.useState)([]),t=Object(s.a)(a,2),l=t[0],r=t[1];Object(n.useEffect)((function(){N.a.get("http://localhost:8000/api/channel/").then((function(a){r(a.data.filter((function(a){return a.members.includes(e._id)})))})).catch((function(e){return console.log(e)}))}),[l,e._id]);var o=function(a){N.a.put("http://localhost:8000/api/user/".concat(e._id,"/add_channel"),{channel_id:a}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))};return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar_top"},c.a.createElement("h3",null,e.displayName),c.a.createElement(i.a,null)),c.a.createElement("div",{className:"sidebar_channels"},c.a.createElement("div",{className:"sidebar_channelsHeader"},c.a.createElement("div",{className:"sidebar_header"},c.a.createElement(i.a,null),c.a.createElement("h4",null,"Text Channels")),c.a.createElement(m.a,{onClick:function(a){a.preventDefault();try{N.a.post("http://localhost:8000/api/channel",{creator_id:e._id,name:"ChannelName"}).then((function(e){return o(e.data._id)})).catch((function(e){return console.log(e)}))}catch(t){console.log(t)}},className:"sidebar_addChannel"})),c.a.createElement("div",{className:"sidebar_channelsList"},l.map((function(e){var a=e._id,t=e.name,n=e.creator_id;return c.a.createElement(I,{key:a,channelId:a,channelName:t,creatorID:n})})))),c.a.createElement("div",{className:"sidebar_voice"},c.a.createElement(x.a,{className:"sidebar_voiceIcon",fontSize:"large"}),c.a.createElement("div",{className:"sidebar_voiceInfo"},c.a.createElement("h3",null,"Voice Connected"),c.a.createElement("p",null,"Stream")),c.a.createElement("div",{className:"sidebar_voiceIcons"},c.a.createElement(P.a,null),c.a.createElement(H.a,null))),c.a.createElement("div",{className:"sidebar_profile"},c.a.createElement(R.a,{src:e.photo}),c.a.createElement("div",{className:"sidebar_profileInfo"},c.a.createElement("h3",null,e.username),c.a.createElement("p",null,"#",e._id.substring(0,5))),c.a.createElement("div",{className:"sidebar_profileIcons"},c.a.createElement(U.a,null),c.a.createElement(G.a,null),c.a.createElement(T.a,null))))},M=t(95),W=(t(127),t(83)),A=t.n(W),V=t(84),$=t.n(V),q=t(85),K=t.n(q),Q=t(86),X=t.n(Q),Y=t(87),Z=t.n(Y),ee=t(82),ae=t.n(ee),te=function(e){var a=Object(d.c)(g);return c.a.createElement("div",{className:"chatHeader"},c.a.createElement("div",{className:"chatHeader_left"},c.a.createElement("h3",null,c.a.createElement("span",{className:"chatHeader_hash"},"#"),a)),c.a.createElement("div",{className:"chatHeader_right"},c.a.createElement(ae.a,null),c.a.createElement(A.a,null),c.a.createElement($.a,null),c.a.createElement("div",{className:"chatHeader_search"},c.a.createElement("input",{placeholder:"Search"}),c.a.createElement(K.a,null)),c.a.createElement(X.a,null),c.a.createElement(Z.a,null)))},ne=(t(128),t(129),t(88)),ce=t.n(ne),le=function(e){var a=Object(n.useState)(""),t=Object(s.a)(a,2),l=t[0],r=t[1],o=Object(d.c)(w),i=Object(d.c)(E);Object(n.useEffect)((function(){N.a.get("http://localhost:8000/api/user/".concat(e.user_id)).then((function(e){r(e.data)})).catch((function(e){return console.log(e)}))}),[e.user_id]);return c.a.createElement("div",{className:"message"},c.a.createElement(R.a,{src:l.photo}),c.a.createElement("div",{className:"message_info"},c.a.createElement("h4",null,l.displayName,c.a.createElement("span",{className:"message_timestamp"},ce()(e.timestamp).startOf("hour").fromNow()),o._id===l._id?c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,{onClick:function(){N.a.put("http://localhost:8000/api/channel/".concat(i,"/remove_message"),{message_id:e._id}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}})):""),c.a.createElement("p",null,e.content)))},re=t(90),se=t.n(re),oe=t(91),ie=t.n(oe),ue=t(92),me=t.n(ue),de=t(93),he=t.n(de),pe=t(89),fe=t.n(pe),Ee=function(){var e=Object(d.c)(w),a=Object(d.c)(E),t=Object(d.c)(g),l=Object(n.useState)(""),r=Object(s.a)(l,2),o=r[0],i=r[1],u=Object(n.useState)([]),m=Object(s.a)(u,2),h=m[0],p=m[1],f=Object(n.useState)((function(){return fe()(":8000")})),b=Object(s.a)(f,1)[0];Object(n.useEffect)((function(){a&&N.a.get("http://localhost:8000/api/channel/".concat(a)).then((function(e){p(e.data.messages.reverse())})).catch((function(e){return console.log(e)}))}),[a,h]),Object(n.useEffect)((function(){b.on("new_message_from_server",(function(e){p((function(a){return[e].concat(Object(M.a)(a))}))}))}),[b]);return c.a.createElement("div",{className:"chat"},c.a.createElement(te,null),c.a.createElement("div",{className:"chat_messages"},h.map((function(e){return c.a.createElement(le,{key:e._id,_id:e._id,content:e.content,user_id:e.creator_id,timestamp:e.createdAt})}))),c.a.createElement("div",{className:"chat_input"},c.a.createElement(se.a,{fontSize:"large"}),c.a.createElement("form",null,c.a.createElement("input",{disabled:!a,value:o,onChange:function(e){return i(e.target.value)},placeholder:"Message #".concat(t)}),c.a.createElement("button",{disabled:!a,onClick:function(t){t.preventDefault(),o&&N.a.put("http://localhost:8000/api/channel/".concat(a,"/add_message"),{creator_id:e._id,content:o}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),i("")},className:"chat_inputButton",type:"submit"})),c.a.createElement("div",{className:"chat_inputIcons"},c.a.createElement(ie.a,{fontSize:"large"}),c.a.createElement(me.a,{fontSize:"large"}),c.a.createElement(he.a,{fontSize:"large"}))))},ge=(t(159),t(178)),be=(t(160),t(16)),ve=function(){var e=Object(n.useState)(""),a=Object(s.a)(e,2),t=a[0],l=a[1],r=Object(n.useState)(""),o=Object(s.a)(r,2),i=o[0],u=o[1],m=Object(n.useState)(""),h=Object(s.a)(m,2),p=h[0],f=h[1],E=Object(d.b)();return c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login_logo"},c.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/sco/thumb/9/98/Discord_logo.svg/800px-Discord_logo.svg.png",alt:""})),c.a.createElement("h3",null,"This Project is still under development. Register or click Guest login twice to use application "),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),N.a.post("http://localhost:8000/api/login",{username:t,password:i},{withCredentials:!0}).then((function(e){N.a.get("http://localhost:8000/api/users/loggedin",{withCredentials:!0}).then((function(e){E(O({_id:e.data._id,username:e.data.username,photo:e.data.photo,displayName:e.data.displayName,channels:e.data.channels})),Object(be.c)("/app")})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}),f("Invalid Username / Password"))}},c.a.createElement("label",{htmlFor:"username"},"Username ",p?c.a.createElement("p",{className:"text-danger"},p):""),c.a.createElement("input",{type:"text",name:"username",autoComplete:"username",onChange:function(e){return l(e.target.value)}}),c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{type:"password",name:"password",autoComplete:"current-password",onChange:function(e){return u(e.target.value)}}),c.a.createElement(ge.a,{type:"submit"},"Sign In"),c.a.createElement(ge.a,{className:"guestLogin",onClick:function(e){e.preventDefault(),l("guestuser"),u("guestpass"),N.a.post("http://localhost:8000/api/login",{username:t,password:i},{withCredentials:!0}).then((function(e){N.a.get("http://localhost:8000/api/users/loggedin",{withCredentials:!0}).then((function(e){E(O({_id:e.data._id,username:e.data.username,photo:e.data.photo,displayName:e.data.displayName,channels:e.data.channels})),Object(be.c)("/app")})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}),f("Invalid Username / Password"))}},"Guest Sign In"),c.a.createElement(be.a,{className:"register_link",to:"/register"},"New around here? Register!")))},Ne=(t(164),function(){var e=Object(n.useState)(""),a=Object(s.a)(e,2),t=a[0],l=a[1],r=Object(n.useState)(""),o=Object(s.a)(r,2),i=o[0],u=o[1],m=Object(n.useState)(""),d=Object(s.a)(m,2),h=d[0],p=d[1],f=Object(n.useState)(""),E=Object(s.a)(f,2),g=E[0],b=E[1],v=Object(n.useState)(""),_=Object(s.a)(v,2),j=_[0],O=_[1],w=Object(n.useState)({}),C=Object(s.a)(w,2),S=C[0],y=C[1];return c.a.createElement("div",{className:"register"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={username:t,displayName:i,photo:h,password:g,confirmPassword:j};N.a.post("http://localhost:8000/api/register",a,{withCredentials:!0}).then((function(e){console.log(e),e.data.errors?y(e.data.errors):Object(be.c)("/")})).catch((function(e){return console.log(e)}))}},c.a.createElement("h4",null,"REGISTER"),c.a.createElement("label",{htmlFor:"username"},"Username ",S.username?c.a.createElement("span",{className:"text-danger"},S.username.properties.message):""),c.a.createElement("input",{name:"username",type:"text",onChange:function(e){return l(e.target.value)}}),c.a.createElement("label",{htmlFor:"displayName"},"Display Name ",S.displayName?c.a.createElement("p",{className:"text-danger"},S.displayName.properties.message):""),c.a.createElement("input",{name:"displayName",type:"text",onChange:function(e){return u(e.target.value)}}),c.a.createElement("label",{htmlFor:"photo"},"Photo (URL) ",S.photo?c.a.createElement("p",{className:"text-danger"},S.photo.properties.message):""),c.a.createElement("input",{name:"photo",type:"text",onChange:function(e){return p(e.target.value)}}),c.a.createElement("label",{htmlFor:"password"},"Password ",S.password?c.a.createElement("p",{className:"text-danger"},S.password.properties.message):""),c.a.createElement("input",{type:"password",onChange:function(e){return b(e.target.value)}}),c.a.createElement("label",{htmlFor:"confirmPassword"},"Confirm Password ",S.confirmPassword?c.a.createElement("p",{className:"text-danger"},S.confirmPassword.properties.message):""),c.a.createElement("input",{name:"confirmPassword",type:"password",onChange:function(e){return O(e.target.value)}}),c.a.createElement(ge.a,{type:"submit"},"Submit"),c.a.createElement(be.a,{className:"return_link",to:"../"},"Return")))});var _e=function(){var e=Object(d.c)(w),a=function(){return c.a.createElement("div",{className:"app"},c.a.createElement(J,null),c.a.createElement(Ee,null))};return c.a.createElement("div",null,c.a.createElement(be.b,null,e?c.a.createElement(a,{path:"/app"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(ve,{path:"/"}),c.a.createElement(Ne,{path:"/register"}))))},je=Object(h.a)({reducer:{user:C,app:b}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(d.a,{store:je},c.a.createElement(_e,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},98:function(e,a,t){e.exports=t(165)}},[[98,1,2]]]);
//# sourceMappingURL=main.8744740b.chunk.js.map