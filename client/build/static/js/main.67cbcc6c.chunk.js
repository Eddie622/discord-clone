(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{110:function(e,t,a){e.exports=a(178)},115:function(e,t,a){},117:function(e,t,a){},122:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},169:function(e,t){},172:function(e,t,a){},173:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),l=a.n(r),s=(a(115),a(4)),o=a.n(s),i=a(16),u=(a(117),a(56)),m=a.n(u),p=a(86),h=a.n(p),d=a(9),f=a(3),g=a(27),E=Object(g.b)({name:"app",initialState:{channels:[],channelId:null,channelName:null},reducers:{setChannels:function(e,t){e.channels=t.payload.channels},setChannelInfo:function(e,t){e.channelId=t.payload.channelId,e.channelName=t.payload.channelName}}}),b=E.actions,v=b.setChannels,N=b.setChannelInfo,w=function(e){return e.app.channels},O=function(e){return e.app.channelId},j=function(e){return e.app.channelName},_=E.reducer,C=(a(122),a(5)),y=a.n(C),x=Object(g.b)({name:"user",initialState:{user:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null}}}),S=x.actions,k=S.login,I=S.logout,P=function(e){return e.user.user},D=x.reducer,F=a(47),H=a.n(F),z=a(194),R=function(e){var t=Object(f.b)(),a=Object(f.c)(P),r=Object(n.useState)(e.channelName),l=Object(d.a)(r,2),s=l[0],u=l[1],m=function(){var a=Object(i.a)(o.a.mark((function a(n){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.next=3,y.a.put("http://localhost:8000/api/channel/".concat(e.channelId),{name:s},{withCredentials:!0}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 3:t(N({channelName:s})),e.getChannels();case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),p=function(){var a=Object(i.a)(o.a.mark((function a(n){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.stopPropagation(),t(N({channelId:null,channelName:null})),a.next=4,y.a.delete("http://localhost:8000/api/channel/".concat(e.channelId),{withCredentials:!0}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 4:e.getChannels();case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return c.a.createElement("div",{className:"sidebarChannel",onClick:function(){return t(N({channelId:e.channelId,channelName:e.channelName}))}},a._id===e.creatorID?c.a.createElement("form",{onSubmit:m},c.a.createElement("h4",null,c.a.createElement("span",{className:"sidebarChannel_hash"},"#"),c.a.createElement("input",{className:"channel_name",onChange:function(e){return u(e.target.value)},value:s}),c.a.createElement("button",{className:"channel_inputButton",type:"submit"}),c.a.createElement(z.a,{title:"delete channel",placement:"top"},c.a.createElement(H.a,{onClick:p})))):c.a.createElement("h4",null,c.a.createElement("span",{className:"sidebarChannel_hash"},"#"),e.channelName))},B=a(87),U=a.n(B),L=a(88),M=a.n(L),G=a(89),J=a.n(G),T=a(196),W=a(90),A=a.n(W),V=a(91),$=a.n(V),q=a(92),K=a.n(q),Q=function(){var e=Object(f.c)(P),t=Object(f.c)(w),a=Object(f.b)(),r=Object(n.useCallback)((function(){y.a.get("http://localhost:8000/api/channel/",{withCredentials:!0}).then((function(e){return a(v({channels:e.data}))})).catch((function(e){return console.log(e)}))}),[a]);Object(n.useEffect)((function(){r()}),[e._id,r]);var l=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.post("http://localhost:8000/api/channel",{creator_id:e._id,name:"NewChannel"},{withCredentials:!0}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 2:r();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar_top"},c.a.createElement("h3",null,e.displayName),c.a.createElement(m.a,null)),c.a.createElement("div",{className:"sidebar_channels"},c.a.createElement("div",{className:"sidebar_channelsHeader"},c.a.createElement("div",{className:"sidebar_header"},c.a.createElement(m.a,null),c.a.createElement("h4",null,"Text Channels")),c.a.createElement(z.a,{title:"create channel",placement:"top"},c.a.createElement(h.a,{onClick:l,className:"sidebar_addChannel"}))),c.a.createElement("div",{className:"sidebar_channelsList"},t.map((function(e){var t=e._id,a=e.name,n=e.creator_id;return c.a.createElement(R,{key:t,channelId:t,channelName:a,creatorID:n,getChannels:r})})))),c.a.createElement("div",{className:"sidebar_voice"},c.a.createElement(U.a,{className:"sidebar_voiceIcon",fontSize:"large"}),c.a.createElement("div",{className:"sidebar_voiceInfo"},c.a.createElement("h3",null,"Voice Connected"),c.a.createElement("p",null,"Stream")),c.a.createElement("div",{className:"sidebar_voiceIcons"},c.a.createElement(M.a,null),c.a.createElement(J.a,null))),c.a.createElement("div",{className:"sidebar_profile"},c.a.createElement(T.a,{src:e.photo}),c.a.createElement("div",{className:"sidebar_profileInfo"},c.a.createElement("h3",null,e.username),c.a.createElement("p",null,"#",e._id.substring(0,5))),c.a.createElement("div",{className:"sidebar_profileIcons"},c.a.createElement(A.a,null),c.a.createElement($.a,null),c.a.createElement(z.a,{title:"logout"},c.a.createElement(K.a,{className:"setting",onClick:function(){a(I()),y.a.post("http://localhost:8000/api/logout",{},{withCredentials:!0}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}})))))},X=a(106),Y=(a(140),a(94)),Z=a.n(Y),ee=a(95),te=a.n(ee),ae=a(96),ne=a.n(ae),ce=a(97),re=a.n(ce),le=a(98),se=a.n(le),oe=a(93),ie=a.n(oe),ue=function(){var e=Object(f.c)(j);return c.a.createElement("div",{className:"chatHeader"},c.a.createElement("div",{className:"chatHeader_left"},c.a.createElement("h3",null,c.a.createElement("span",{className:"chatHeader_hash"},"#"),e)),c.a.createElement("div",{className:"chatHeader_right"},c.a.createElement(ie.a,null),c.a.createElement(Z.a,null),c.a.createElement(te.a,null),c.a.createElement("div",{className:"chatHeader_search"},c.a.createElement("input",{placeholder:"Search"}),c.a.createElement(ne.a,null)),c.a.createElement(re.a,null),c.a.createElement(se.a,null)))},me=(a(141),a(142),a(99)),pe=a.n(me),he=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),r=a[0],l=a[1],s=Object(f.c)(P),u=Object(f.c)(O);Object(n.useEffect)((function(){y.a.get("http://localhost:8000/api/user/".concat(e.user_id),{withCredentials:!0}).then((function(e){l(e.data)})).catch((function(e){return console.log(e)}))}),[e.user_id]);var m=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.put("http://localhost:8000/api/channel/".concat(u,"/remove_message"),{message_id:e._id},{withCredentials:!0}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 2:e.getMessages();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c.a.createElement("div",{className:"message"},c.a.createElement(T.a,{src:r.photo}),c.a.createElement("div",{className:"message_info"},c.a.createElement("h4",null,r.displayName,c.a.createElement("span",{className:"message_timestamp"},pe()(e.timestamp).startOf("hour").fromNow()),s._id===r._id?c.a.createElement(c.a.Fragment,null,c.a.createElement(H.a,{onClick:m})):""),c.a.createElement("p",null,e.content)))},de=a(101),fe=a.n(de),ge=a(102),Ee=a.n(ge),be=a(103),ve=a.n(be),Ne=a(104),we=a.n(Ne),Oe=a(100),je=a.n(Oe),_e=function(){var e=Object(f.c)(P),t=Object(f.c)(O),a=Object(f.c)(j),r=Object(n.useState)(""),l=Object(d.a)(r,2),s=l[0],u=l[1],m=Object(n.useState)([]),p=Object(d.a)(m,2),h=p[0],g=p[1],E=Object(n.useState)((function(){return je()(":8000")})),b=Object(d.a)(E,1)[0],v=Object(n.useCallback)((function(){y.a.get("http://localhost:8000/api/channel/".concat(t),{withCredentials:!0}).then((function(e){return g(e.data.messages.reverse())})).catch((function(e){return console.log(e)}))}),[t]);Object(n.useEffect)((function(){t&&v()}),[t,v]),Object(n.useEffect)((function(){b.on("new_message_from_server",(function(e){g((function(t){return[e].concat(Object(X.a)(t))}))}))}),[b]);var N=function(){var a=Object(i.a)(o.a.mark((function a(n){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!s){a.next=4;break}return a.next=4,y.a.put("http://localhost:8000/api/channel/".concat(t,"/add_message"),{creator_id:e._id,content:s},{withCredentials:!0}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));case 4:u(""),v();case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return c.a.createElement("div",{className:"chat"},c.a.createElement(ue,null),c.a.createElement("div",{className:"chat_messages"},h.map((function(e){return c.a.createElement(he,{key:e._id,_id:e._id,content:e.content,user_id:e.creator_id,timestamp:e.createdAt,getMessages:v})}))),c.a.createElement("div",{className:"chat_input"},c.a.createElement(fe.a,{fontSize:"large"}),c.a.createElement("form",null,c.a.createElement("input",{disabled:!t,value:s,onChange:function(e){return u(e.target.value)},placeholder:"Message #".concat(a)}),c.a.createElement("button",{disabled:!t,onClick:N,className:"chat_inputButton",type:"submit"})),c.a.createElement("div",{className:"chat_inputIcons"},c.a.createElement(Ee.a,{fontSize:"large"}),c.a.createElement(ve.a,{fontSize:"large"}),c.a.createElement(we.a,{fontSize:"large"}))))},Ce=(a(172),a(195)),ye=(a(173),a(24)),xe=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),s=Object(d.a)(l,2),u=s[0],m=s[1],p=Object(n.useState)(""),h=Object(d.a)(p,2),g=h[0],E=h[1],b=Object(f.b)(),v=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y.a.post("http://localhost:8000/api/login",{username:a,password:u},{withCredentials:!0}).then(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,y.a.get("http://localhost:8000/api/users/loggedin",{withCredentials:!0}).then((function(e){b(k({_id:e.data._id,username:e.data.username,photo:e.data.photo,displayName:e.data.displayName,channels:e.data.channels}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e&&E("Invalid Username / Password")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y.a.post("http://localhost:8000/api/login",{username:"guestuser",password:"guestpass"},{withCredentials:!0}).then(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("http://localhost:8000/api/users/loggedin",{withCredentials:!0}).then((function(e){b(k({_id:e.data._id,username:e.data.username,photo:e.data.photo,displayName:e.data.displayName,channels:e.data.channels}))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login_logo"},c.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/sco/thumb/9/98/Discord_logo.svg/800px-Discord_logo.svg.png",alt:""})),c.a.createElement("form",{onSubmit:v},c.a.createElement("label",{htmlFor:"username"},"Username ",g?c.a.createElement("p",{className:"text-danger"},g):""),c.a.createElement("input",{type:"text",name:"username",autoComplete:"username",onChange:function(e){return r(e.target.value)}}),c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{type:"password",name:"password",autoComplete:"current-password",onChange:function(e){return m(e.target.value)}}),c.a.createElement(Ce.a,{type:"submit"},"Sign In"),c.a.createElement(Ce.a,{className:"guestLogin",onClick:N},"Guest Sign In"),c.a.createElement(ye.a,{className:"register_link",to:"/register"},"New around here? Register!")))},Se=(a(177),function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),s=Object(d.a)(l,2),o=s[0],i=s[1],u=Object(n.useState)(""),m=Object(d.a)(u,2),p=m[0],h=m[1],f=Object(n.useState)(""),g=Object(d.a)(f,2),E=g[0],b=g[1],v=Object(n.useState)(""),N=Object(d.a)(v,2),w=N[0],O=N[1],j=Object(n.useState)({}),_=Object(d.a)(j,2),C=_[0],x=_[1];return c.a.createElement("div",{className:"register"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={username:a,displayName:o,photo:p,password:E,confirmPassword:w};y.a.post("http://localhost:8000/api/register",t).then((function(e){console.log(e),e.data.errors?x(e.data.errors):Object(ye.c)("/")})).catch((function(e){return console.log(e)}))}},c.a.createElement("h4",null,"REGISTER"),c.a.createElement("label",{htmlFor:"username"},"Username"," ",C.username?c.a.createElement("span",{className:"text-danger"},C.username.properties.message):""),c.a.createElement("input",{name:"username",type:"text",onChange:function(e){return r(e.target.value)}}),c.a.createElement("label",{htmlFor:"displayName"},"Display Name"," ",C.displayName?c.a.createElement("p",{className:"text-danger"},C.displayName.properties.message):""),c.a.createElement("input",{name:"displayName",type:"text",onChange:function(e){return i(e.target.value)}}),c.a.createElement("label",{htmlFor:"photo"},"Photo (URL)"," ",C.photo?c.a.createElement("p",{className:"text-danger"},C.photo.properties.message):""),c.a.createElement("input",{name:"photo",type:"text",autoComplete:"off",onChange:function(e){return h(e.target.value)}}),c.a.createElement("label",{htmlFor:"password"},"Password"," ",C.password?c.a.createElement("p",{className:"text-danger"},C.password.properties.message):""),c.a.createElement("input",{type:"password",autoComplete:"new-password",onChange:function(e){return b(e.target.value)}}),c.a.createElement("label",{htmlFor:"confirmPassword"},"Confirm Password"," ",C.confirmPassword?c.a.createElement("p",{className:"text-danger"},C.confirmPassword.properties.message):""),c.a.createElement("input",{name:"confirmPassword",type:"password",autoComplete:"new-password",onChange:function(e){return O(e.target.value)}}),c.a.createElement(Ce.a,{type:"submit"},"Submit"),c.a.createElement(ye.a,{className:"return_link",to:"../"},"Return")))});var ke=function(){var e=Object(f.c)(P),t=Object(f.b)();Object(n.useEffect)((function(){y.a.get("http://localhost:8000/api/users/loggedin",{withCredentials:!0}).then((function(e){t(k({_id:e.data._id,username:e.data.username,photo:e.data.photo,displayName:e.data.displayName,channels:e.data.channels}))})).catch((function(e){return console.log(e)}))}),[t]);var a=function(){return c.a.createElement("div",{className:"app"},c.a.createElement(Q,null),c.a.createElement(_e,null))};return c.a.createElement("div",null,c.a.createElement(ye.b,null,e?c.a.createElement(a,{path:"/"}):c.a.createElement(c.a.Fragment,null,c.a.createElement(xe,{path:"/"}),c.a.createElement(Se,{path:"/register"}))))},Ie=Object(g.a)({reducer:{user:D,app:_}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(f.a,{store:Ie},c.a.createElement(ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[110,1,2]]]);
//# sourceMappingURL=main.67cbcc6c.chunk.js.map